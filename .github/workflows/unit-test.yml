name: Unit Test

on: [push]
#  workflow_dispatch:
#    push:
#      branches: ["feature/*"]
#      paths:
#        - 'back-end/**'
#        - 'front-end/**'


jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4
        with:
          path: ./back-end/school


      - name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v2

      - name: Backend Build and test
        continue-on-error: true
        run: |
          docker build --target unittest -t myapp:dev ./back-end/school
          docker run --name test --rm myapp:dev ls 

      - name: Test Report
        run: |
          echo "========== test ============"
          #docker ps
          #docker inspect $(docker ps -alq)
          #docker exec -it $(docker ps -alq) pwd
          #docker exec -it $(docker ps -alq) ls
          
          docker cp $(docker ps -alq):. .
          ls .
          ls /
          ls /back-end
          exit 1
        
        
          
        
      


